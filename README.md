# NPM Package Template

TypeScriptã‚’ä½¿ç”¨ã—ãŸnpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºã®ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚

## æ©Ÿèƒ½

- âš¡ï¸ [Vite](https://vitejs.dev/)ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰
- ğŸ¯ [TypeScript](https://www.typescriptlang.org/)ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§
- âœ… [Vitest](https://vitest.dev/)ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ
- ğŸ“ [ESLint](https://eslint.org/) + [Prettier](https://prettier.io/)ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†
- ğŸš€ GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥
- ğŸ“¦ ES Modulesã¨CommonJSã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

1. ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ
2. ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã‚’å¤‰æ›´

### package.json

```json
{
  "name": "<package-name>", // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’å¤‰æ›´
  "repository": {
    "type": "git",
    "url": "<repository-url>" // ãƒªãƒã‚¸ãƒˆãƒªURLã‚’å¤‰æ›´
  },
  "version": "0.0.0" // åˆæœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®š
  // ... ãã®ä»–ã®è¨­å®šã¯å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´
}
```

### vite.config.ts

```typescript
export default defineConfig({
  build: {
    lib: {
      name: '<package-name>', // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’å¤‰æ›´
      entry: {
        main: './lib/index.ts', // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´
        // è¿½åŠ ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®š
      },
    },
  },
});
```

### .github/workflows/npm-publish.yml

```yaml
env:
  NODE_AUTH_TOKEN: ${{secrets.NPM_TOKEN}}  // NPM_TOKENã‚’GitHubã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«è¨­å®š
```

## é–‹ç™ºæ‰‹é †

1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

2. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
npm test                 # ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm run test:coverage   # ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ
```

3. ãƒªãƒ³ãƒˆã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```bash
npm run lint           # ãƒªãƒ³ãƒˆã®å®Ÿè¡Œ
npm run lint:fix       # ãƒªãƒ³ãƒˆã‚¨ãƒ©ãƒ¼ã®è‡ªå‹•ä¿®æ­£
npm run format         # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®Ÿè¡Œ
```

4. ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ§‹é€ 

```
.
â”œâ”€â”€ lib/                    # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ index.ts           # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ **/*.ts           # ãã®ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â””â”€â”€ **/*.spec.ts         # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ dist/                  # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
    â”œâ”€â”€ es/               # ES Modules
    â”œâ”€â”€ cjs/              # CommonJS
    â””â”€â”€ types/            # å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
```

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨æ–¹æ³•

### ES Modules

```typescript
import { yourFunction } from '<package-name>';
```

### CommonJS

```javascript
const { yourFunction } = require('<package-name>');
```

## ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥æ‰‹é †

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®š

   - NPM_TOKENã‚’ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«è¿½åŠ 
   - å¿…è¦ã«å¿œã˜ã¦ãƒ–ãƒ©ãƒ³ãƒä¿è­·ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®š

2. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ãƒªãƒªãƒ¼ã‚¹

   ```bash
   npm version patch|minor|major
   git push --follow-tags
   ```

3. GitHubã§ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆ
   - ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã¨è‡ªå‹•çš„ã«npmã«ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™

## æ³¨æ„ç‚¹

- `package.json`ã®`"type": "module"`è¨­å®šã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€ãƒ“ãƒ«ãƒ‰è¨­å®šã‚‚é©åˆ‡ã«èª¿æ•´ã—ã¦ãã ã•ã„
- æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã€`vite.config.ts`ã¨`package.json`ã®`exports`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸¡æ–¹ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯¾è±¡ã®ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`*.spec.ts`ã¨ã—ã¦é…ç½®ã—ã¦ãã ã•ã„

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯[Apache-2.0ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](LICENSE)ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

> [!NOTE]
> ã“ã®READMEã¯æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãã ã•ã„ã€‚
